# diary@20220726

## [别路 ｜ 作业帮在 k8s 接入云厂商虚拟节点](https://www.infoq.cn/article/TWzvplySyD8CTJ09VKCU)
_tags: #kubernetes #architecture #cloud #elastic-scale_

> - 业务负载：作业帮的大部分服务都已经完成容器化，
>       在线业务有着典型的高峰期，且高峰期持续时间较短（约 4 个小时/每天）。
>       高峰期服务器平均负载接近 60%，而低峰期负载只有 10%左右。
> - 调度方案
>   1. 朴素方案：通过 NodeSelector，把虚拟节点和标准节点是完全分开的，服务只能调度到指定的资源池；
>   1. 云厂商方案：用户不用指定 selector，当 pod 因固定节点资源不足调度 pending 的时候，再尝试调度到虚拟节点上。
>       - 在集群资源已满的情况下才调度到虚拟节点，会导致 pod 部署过于密集，节点负载太高影响业务。
>   1. 作业帮自研方案：使用自研调度器将具体服务超过一定数量的 pod 调度到虚拟节点上
作业帮
> - 观测方案
>   - 日志采集统一发送到 Kafka；
>   - 监控 metrics 接口兼容 Kubelet，无缝接入 Prometheus；
>   - 分布式追踪跳过 jeager agent，直接推送到 jeager collector。
> - 性能差异处理：上虚拟节点前进行充分测试和评估。
> - 云库存风险：扩容时如果指定规格资源不足，自动升级配置。
> - 问题定位：建议云厂商自动上传 core dump 至对象存储。
> - 效果：高峰期已有近万核规模的核心链路在线业务运行在 Kubernetes 虚拟节点上。

吐槽：标题写了 Serverless，其实不是。
    Anyway，很好的混合云 kubernetes elastic scaling 实践分享。

## [LeegoYih ｜ 帮助新人融入组织熟悉流程的几件事](https://www.v2ex.com/t/868776#r_11921394)
_tags: #leadership #mentor #onboard_

> 如果我是新人，我希望 mentor 做点实际的事情，而不是给我人生建议或聊一些有的没的：
>
> 0. 给我一份文档，让我在本地把环境搭建起来。（ Go/Java/Python/IDE 等等）
> 1. 给我开通各种权限，说明注意事项。（ Git 仓库 /DevOps/测试库 /日志等等）
> 2. 给我需求文档和代码仓库，让我在本地先能运行项目，然后熟悉项目需求，熟悉代码提交规范。
> 3. 给我介绍公司常用技术栈，让我平时能够自己学习技术。
> 4. 带我参与需求评审，分给我一个模块，按项目组规范写设计方案和画图。
> 5. 参与我的技术评审，指出我方案中的问题，给出建议。
> 6. 参与设计稿 /测试用例 /前端评审，介绍需要对接的同事。
> 7. 按集团规范进行开发，帮我 review 代码，有问题的地方及时修改。
> 8. 与前端同事进行联调。
> 9. 带我熟悉 test/QA 测试流程，如何冒烟自测，如何发提测邮件，如何使用 JIRA/禅道 等，与测试同事沟通。
> 10. 带我熟悉 uat/pre/prod 发布流程，如何排查问题，如何提交 SQL 脚本，一些注意事项。
>
> 带新人是上面安排的工作，做好自己的工作就行，又不是带崽。新人遇到问题时你再教他，你要让他知道“遇到问题及时问”，而不是手把手教他，更不能让他自己憋着。
>
> 如果一段时间下来，他还是无法胜任工作，问心无愧解除合同。
>
> 当然，如果新人很尊敬你，那就是另一回事了。
